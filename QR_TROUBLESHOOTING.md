# 🔧 دليل حل مشاكل QR Code و Barcode

## 🚨 **المشكلة: "لا يقرأ QR Code أو Barcode"**

### 📋 **خطوات التشخيص السريع:**

#### **1. فحص المكتبات** 🔍
```javascript
// افتح Console في المتصفح (F12) واكتب:
console.log('jsQR:', typeof jsQR !== 'undefined');
console.log('ZXing:', typeof ZXing !== 'undefined');
```

#### **2. فحص الكاميرا** 📷
- **امنح الإذن** للكاميرا عند الطلب
- **تأكد من عدم استخدام** الكاميرا في تطبيق آخر
- **جرب متصفح مختلف** (Chrome مفضل)

#### **3. فحص QR Code** 📱
- **استخدم QR Codes الجاهزة** من [صفحة الاختبار](/qr-test.html)
- **تأكد من وضوح الكود** وعدم تشويهه
- **اقترب من الكود** (10-30 سم)

---

## 🛠️ **الحلول المتاحة:**

### **الحل 1: استخدم أدوات التشخيص** 🔧
1. **افتح**: [صفحة التشخيص](/simple-qr-test.html)
2. **اضغط**: "فحص المكتبات" 
3. **اضغط**: "فحص الكاميرا"
4. **اضغط**: "بدء اختبار المسح"

### **الحل 2: استخدم QR Codes الجاهزة** 📋
1. **افتح**: [QR & Barcode للاختبار](/qr-test.html)
2. **استخدم**: الرموز الجاهزة المضمونة
3. **جرب**: أنواع مختلفة (QR, Code128, EAN-13)

### **الحل 3: الإدخال اليدوي** ⌨️
1. **اضغط**: "مسح الكود" في نظام الدفع
2. **اضغط**: "إدخال يدوي" في نافذة المسح
3. **أدخل**: رقم الإيصال يدوياً

---

## 🎯 **أسباب المشاكل الشائعة:**

| المشكلة | السبب | الحل |
|---------|-------|------|
| **لا يفتح المسح** | لم يتم منح إذن الكاميرا | امنح الإذن وأعد المحاولة |
| **لا يقرأ QR** | مكتبة jsQR لم تحمل | أعد تحميل الصفحة |
| **لا يقرأ Barcode** | مكتبة ZXing لم تحمل | تحقق من الاتصال بالإنترنت |
| **كاميرا لا تعمل** | متصفح لا يدعم getUserMedia | استخدم Chrome أو Firefox |
| **QR غير واضح** | جودة الكاميرا أو الإضاءة | حسن الإضاءة واقترب |

---

## 🧪 **اختبارات سريعة:**

### **اختبار 1: QR Code بسيط** ✅
```
محتوى: "12345"
متوقع: يستخرج 12345
```

### **اختبار 2: QR Code مع نص** ✅
```
محتوى: "إيصال: 67890"
متوقع: يستخرج 67890
```

### **اختبار 3: Barcode Code128** ✅
```
محتوى: "99999"
متوقع: يستخرج 99999
```

---

## 🔗 **روابط مفيدة:**

- 🏠 **النظام الرئيسي**: [إدارة الدفع](/admin/payment-management.html)
- 🧪 **صفحة الاختبار**: [QR & Barcode](/qr-test.html)
- 🔧 **التشخيص**: [فحص المشاكل](/simple-qr-test.html)
- 📊 **معلومات شاملة**: [دليل الاستخدام](/barcode-qr-test.html)

---

## 📞 **إذا استمرت المشكلة:**

### **خطوات إضافية:**
1. **أعد تحميل الصفحة** (Ctrl+F5)
2. **امسح cache المتصفح**
3. **جرب متصفح مختلف**
4. **تأكد من الاتصال بالإنترنت**
5. **استخدم "إدخال يدوي" كبديل**

### **معلومات للدعم:**
- **المتصفح**: اكتب `navigator.userAgent` في Console
- **المكتبات**: اضغط "اختبار المكتبة" في نافذة المسح
- **الكاميرا**: جرب "فحص الكاميرا" في صفحة التشخيص

---

## ✅ **النتيجة المتوقعة:**

**عند نجاح المسح:**
1. ✅ **يظهر**: "تم مسح [نوع الكود] بنجاح!"
2. ✅ **يملأ**: حقل رقم الإيصال تلقائياً
3. ✅ **يغلق**: نافذة المسح
4. ✅ **يؤكد**: الدفع تلقائياً

**النظام يدعم 7 أنواع رموز - إذا لم يعمل واحد، جرب آخر!** 🎯
